<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta content="zh-cn" http-equiv="Content-Language" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Welcome!</title>
    <style type="text/css">
        #search-input:hover {
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 25px rgba(0, 0, 0, .2);
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
        }
        
        #search-input {
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(0, 0, 0, .2);
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
            position: absolute;
            width: 40%;
            left: calc((100% - 40%) / 2);
            top: 35%;
            border: 0px solid #ccc;
            padding: 13px 0px;
            outline: medium;
            border-radius: 18px;
            padding-left: 15px;
            border-width: 0px;
        }
        
        #schoose {
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(0, 0, 0, .2);
            position: absolute;
            width: 22%;
            background-color: rgb(34, 145, 197);
            left: calc((100% - 22%) / 2);
            top: 45%;
            border-radius: 10px;
            padding: 10px;
            color: white;
        }
        
        #schoose-one {
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(0, 0, 0, .2);
            width: 65px;
            background-color: rgb(69, 169, 216);
            float: left;
            margin-left: 10px;
            margin-right: 10px;
            text-align: center;
            cursor: pointer;
            padding: 5px;
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
            border-radius: 4px;
        }
        
        #schoose-one:hover {
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 12px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 12px rgba(0, 0, 0, .2);
            background-color: rgb(119, 193, 228) !important;
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
        }
        
        #oftens {
            position: absolute;
            width: 80%;
            left: calc((100% - 80%) / 2);
            top: 65%;
            height: 20%;
        }
        
        #oftens-one {
            width: calc(20% - 20px);
            height: 100%;
            background-color: rgb(31, 140, 241);
            margin: 10px;
            border-radius: 10px;
            float: left;
            cursor: pointer;
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
            color: white;
            text-align: center;
        }
        
        #oftens-one:hover {
            background-color: rgb(22, 108, 189);
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 16px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 16px rgba(0, 0, 0, .2);
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
        }
        
        #oftens-one div {
            width: 20px;
            height: 20px;
            background-color: rgb(31, 140, 241);
            margin: 10px;
            padding: 2px;
            border-radius: 12px;
            float: right;
            cursor: pointer;
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
            color: white;
            text-align: center;
            display: none;
        }
        
        #oftens-one div:hover {
            background-color: rgb(20, 99, 173);
            transition: all 0.5s ease 0s;
            -moz-transition: all 0.5s ease 0s;
            -webkit-transition: all 0.5s ease 0s;
        }
        
        body {
            width: 100%;
            height: 100%;
            margin: 0;
        }
        
        #logo {
            position: absolute;
            left: calc((100% - 300px) / 2);
            top: 70px;
        }
    </style>
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="prompt/js/zepto.js"></script>
    <script src="prompt/dist/prompt.js"></script>
    <script src="alert/js/ui.js"></script>
    <link href="alert/css/style.css" rel="stylesheet" />
</head>

<body>
    <script>
        function getCookie(name) {
            var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
            if (arr = document.cookie.match(reg))
                return unescape(arr[2]);
            else
                return null;
        }

        function setCookie(name, value) {
            var Days = 30;
            var exp = new Date();
            exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);
            document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();
        }

        var nows = 0;

        function changes(id) {
            var slist = ['baidu', 'google', 'bing'];
            for (i in slist) {
                if (slist[i] != id)
                    document.getElementsByName(slist[i])[0].style.backgroundColor = 'rgb(69, 169, 216)';
                else
                    nows = i;
            }
            setCookie('nows', id);
            document.getElementsByName(id)[0].style.backgroundColor = 'blue';
            document.getElementById('logo').src = 'logo/' + id + '.png';
        }

        function search(text) {
            var searchurl = ['https://www.baidu.com/s?ie=UTF-8&wd=', 'https://www.google.com/search?ie=UTF-8&q=', 'https://cn.bing.com/search?q='];
            window.open(searchurl[nows] + text, '_blank');
        }

        var ofs = {
            'of1': '',
            'of2': '',
            'of3': '',
            'of4': '',
            'of5': '',
        };

        $(document).ready(function() {
            switch (getCookie('nows')) {
                case 'baidu':
                    nows = 0;
                    break;
                case 'google':
                    nows = 1;
                    break;
                case 'bing':
                    nows = 2;
                    break;
            }
            if (getCookie('nows')) {
                document.getElementsByName(getCookie('nows'))[0].style.backgroundColor = 'blue';
                document.getElementById('logo').src = 'logo/' + getCookie('nows') + '.png';
            } else
                document.getElementsByName('baidu')[0].style.backgroundColor = 'blue';

            if (getCookie('ofs')) {
                ofs = JSON.parse(getCookie('ofs'));
                for (i = 1; i <= 5; i++) {
                    if (ofs['of' + i.toString()] != '') {
                        document.getElementsByName('of' + i.toString())[0].getElementsByTagName('span')[0].innerText = ofs['of' + i.toString()];
                        document.getElementsByName('of' + i.toString())[0].getElementsByTagName('span')[0].style.fontSize = '12px';
                        document.getElementsByName('of' + i.toString())[0].getElementsByTagName('div')[0].style.display = 'block';
                    }
                }
            }

            $('#search-input').keyup(function(event) {
                if (event.keyCode == 13) {
                    search($('#search-input').val());
                }
            });
        })

        function checkURL(URL) {
            var str = URL;
            var Expression = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;
            var objExp = new RegExp(Expression);
            if (objExp.test(str) == true) {
                return true;
            } else {
                return false;
            }
        } 

        function addofftens(id) {
            prompt({
                title: '设置链接',
                placeholder: '请输入网址',
                callback: function(text) {
                    if (text) {
                        if (!checkURL(text))
                            if (!checkURL('http://' + text)) {
                                malert.toast('链接不符合格式!', 1500);
                                return;
                            } else
                                text = 'http://' + text;
                        ofs[id] = text;
                        setCookie('ofs', JSON.stringify(ofs));
                        document.getElementsByName(id)[0].getElementsByTagName('span')[0].innerText = text;
                        document.getElementsByName(id)[0].getElementsByTagName('span')[0].style.fontSize = '12px';
                        document.getElementsByName(id)[0].getElementsByTagName('div')[0].style.display = 'block';
                    }
                }
            });

        }

        function removeofftens(id) {
            event.stopPropagation();
            ofs[id] = '';
            document.getElementsByName(id)[0].getElementsByTagName('span')[0].innerText = '+';
            document.getElementsByName(id)[0].getElementsByTagName('span')[0].style.fontSize = '85px';
            document.getElementsByName(id)[0].getElementsByTagName('div')[0].style.display = 'none';
        }
    </script>
    <img src="logo/baidu.png" width="300px" id="logo"></img>
    <input type="text" name="q" id="search-input" autocomplete="off">
    <div id="schoose">
        <div id="schoose-one" name="baidu" onclick="changes('baidu')">Baidu</div>
        <div id="schoose-one" name="google" onclick="changes('google')">Google</div>
        <div id="schoose-one" name="bing" onclick="changes('bing')">Bing</div>
    </div>
    <div id="oftens">
        <div id="oftens-one" name="of1" onclick="if(document.getElementsByName('of1')[0].getElementsByTagName('span')[0].innerText == '+'){addofftens('of1')}else{window.open(document.getElementsByName('of1')[0].getElementsByTagName('span')[0].innerText, '_blank');}"><span style="font-size: 85px;">+</span>
            <div onclick="removeofftens('of1')">x</div>
        </div>
        <div id="oftens-one" name="of2" onclick="if(document.getElementsByName('of2')[0].getElementsByTagName('span')[0].innerText == '+'){addofftens('of2')}else{window.open(document.getElementsByName('of2')[0].getElementsByTagName('span')[0].innerText, '_blank');}"><span style="font-size: 85px;">+</span>
            <div onclick="removeofftens('of2')">x</div>
        </div>
        <div id="oftens-one" name="of3" onclick="if(document.getElementsByName('of3')[0].getElementsByTagName('span')[0].innerText == '+'){addofftens('of3')}else{window.open(document.getElementsByName('of3')[0].getElementsByTagName('span')[0].innerText, '_blank');}"><span style="font-size: 85px;">+</span>
            <div onclick="removeofftens('of3')">x</div>
        </div>
        <div id="oftens-one" name="of4" onclick="if(document.getElementsByName('of4')[0].getElementsByTagName('span')[0].innerText == '+'){addofftens('of4')}else{window.open(document.getElementsByName('of4')[0].getElementsByTagName('span')[0].innerText, '_blank');}"><span style="font-size: 85px;">+</span>
            <div onclick="removeofftens('of4')">x</div>
        </div>
        <div id="oftens-one" name="of5" onclick="if(document.getElementsByName('of5')[0].getElementsByTagName('span')[0].innerText == '+'){addofftens('of5')}else{window.open(document.getElementsByName('of5')[0].getElementsByTagName('span')[0].innerText, '_blank');}"><span style="font-size: 85px;">+</span>
            <div onclick="removeofftens('of5')">x</div>
        </div>
    </div>
</body>

</html>